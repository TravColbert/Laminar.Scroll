<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Sample #6</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="../smoothscroll.js"></script>
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Place favicon.ico in the root directory -->
    <link rel="stylesheet" href="../../Libraries/normalize.css">
    <link rel="stylesheet" href="../../Laminar.Layouts/laminar-base.css">
    <style>
      body {
        background: url("../../Backgrounds/bg_2.jpg");
        background-size: cover;
        background-position: center;
        transition: all 1s;
        display: flex;
        overflow: hidden;
      }
      #base_layout {
        z-index: 0;
      }
      #transitionlayer {
        z-index: 1;
        background: rgba(100,100,100,0.3);
        transition: all 0.5s;
      }
      #page1 {
        z-index: 10;
        background: rgba(100,200,100,0.3);
      }
      #page2 {
        z-index: 20;
        background: rgba(100,100,200,0.3);
      }
      .page {
        width: 100%;
        height: 100%;
        display: flex;
        position: absolute;
        transition: all 1s;
      }
      .slider {
        left: 100%;
      }
      .unslid {
        left: 0%;
      }
    </style>
  </head>
  <body>
    <div id="base_layout" class="page">
      <div id="title" class="layout-height-1-3">Hi, this is the Float</div>
      <div id="menu" class="layout-row layout-width-1-1 layout-height-2-3 layout-justify-around">
        <div id="intro" class="link layout-" data-link="intro">Intro</div>
        <div id="linkprog" class="link" data-link="programing">Programing</div>
        <div id="linkphotography" class="link" data-link="photography">Photography</div>
        <div id="link" class="link" data-link="intro">Four</div>
        <div id="linkcontact" class="link" data-link="contact">Contact</div>
      </div>
    </div>
    <div id="transitionlayer" class="page slider">Transition</div>
    <div id="page1" class="page slider">Page 1</div>
    <div id="page2" class="page slider">Page 2</div>
    <!--
    <div id="floatmenu" class="layout-col layout-width-1-1 layout-align-center">
    </div>
    <div id="mainmenu" class="layout-row layout-height-2-3">
      <div id="intro" class="copy layout-row">
        <div class="layout-col layout-width-1-3"></div>
        <div class="layout-col layout-width-2-3 layout-justify-between">
          <div>Intro: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer scelerisque lorem eu ultrices varius. Aenean iaculis enim nec elit euismod ornare. Nulla euismod venenatis vestibulum. Aenean iaculis fringilla orci, vulputate placerat libero tincidunt ornare. Nunc congue id nibh ac dictum. Mauris suscipit blandit ipsum. Aliquam euismod leo ullamcorper nisi dapibus, in rutrum mauris vehicula. Suspendisse ac ligula tellus. Pellentesque rhoncus at lectus in mollis. Aliquam et aliquet velit. Etiam massa lectus, blandit non aliquam eget, mollis a metus. In sagittis quis urna sit amet aliquet. Suspendisse potenti. Cras elit magna, commodo id turpis a, ornare venenatis nunc. Duis in est eu augue placerat malesuada. Sed commodo dignissim tincidunt.</div>
          <div>picture</div>
          <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer scelerisque lorem eu ultrices varius. Aenean iaculis enim nec elit euismod ornare. Nulla euismod venenatis vestibulum. Aenean iaculis fringilla orci, vulputate placerat libero tincidunt ornare. Nunc congue id nibh ac dictum. Mauris suscipit blandit ipsum. Aliquam euismod leo ullamcorper nisi dapibus, in rutrum mauris vehicula. Suspendisse ac ligula tellus. Pellentesque rhoncus at lectus in mollis. Aliquam et aliquet velit. Etiam massa lectus, blandit non aliquam eget, mollis a metus. In sagittis quis urna sit amet aliquet. Suspendisse potenti. Cras elit magna, commodo id turpis a, ornare venenatis nunc. Duis in est eu augue placerat malesuada. Sed commodo dignissim tincidunt.</div>
        </div>
      </div>
      <div id="programing" class="copy layout-col layout-justify-between">
        <div>Programing: In hac habitasse platea dictumst. Nam mattis vulputate metus, sed sodales ligula elementum eget. Nullam in massa tincidunt, ultrices turpis eget, consectetur lectus. Suspendisse vel venenatis massa. Sed sagittis vitae ex nec sodales. Proin nec nisi sagittis, venenatis nisi et, ullamcorper dui. Quisque pulvinar, tellus in ultricies auctor, enim dui tincidunt felis, eu finibus dui velit quis tellus. Nam faucibus sapien lacinia, imperdiet dui sit amet, malesuada felis. Nullam lacus sem, commodo vitae accumsan sed, varius quis turpis. Nam mollis pharetra massa, vitae rhoncus sem ullamcorper iaculis.</div>
        <div>picture</div>
        <div>In hac habitasse platea dictumst. Nam mattis vulputate metus, sed sodales ligula elementum eget. Nullam in massa tincidunt, ultrices turpis eget, consectetur lectus. Suspendisse vel venenatis massa. Sed sagittis vitae ex nec sodales. Proin nec nisi sagittis, venenatis nisi et, ullamcorper dui. Quisque pulvinar, tellus in ultricies auctor, enim dui tincidunt felis, eu finibus dui velit quis tellus. Nam faucibus sapien lacinia, imperdiet dui sit amet, malesuada felis. Nullam lacus sem, commodo vitae accumsan sed, varius quis turpis. Nam mollis pharetra massa, vitae rhoncus sem ullamcorper iaculis.</div>
      </div>
      <div id="photography" class="copy layout-col layout-justify-between">
        <div>Photography: Nunc pellentesque, nibh nec aliquet laoreet, nulla purus pulvinar tellus, id ullamcorper velit metus in libero. Nam hendrerit nec sem sed consequat. Maecenas condimentum sodales metus, nec facilisis turpis facilisis quis. Vestibulum facilisis magna et leo tincidunt, id viverra tellus elementum. Nulla ultricies sem et diam semper vehicula. Interdum et malesuada fames ac ante ipsum primis in faucibus. Ut blandit elementum dui nec finibus. Aliquam erat volutpat. Phasellus sem quam, tincidunt vel justo eget, sagittis pharetra nisl. Vivamus ultrices auctor odio, nec dictum tortor vulputate a. Etiam varius augue tempus semper rhoncus. Aliquam efficitur mauris et dignissim dignissim.</div>
        <div>picture</div>
        <div>Proin mollis pulvinar vulputate. Curabitur suscipit tempor tellus, vel semper arcu. Praesent vel nisi imperdiet, dictum neque nec, pellentesque massa. Phasellus eu ornare tortor, non malesuada massa. Phasellus cursus, justo et laoreet maximus, neque orci finibus tellus, ut viverra neque augue in tellus. Fusce volutpat tincidunt massa, id laoreet augue lacinia et. Donec id iaculis dolor, et blandit nulla. Nullam vitae quam sed purus tempus gravida. Proin elementum magna nisl, at vulputate tellus egestas vitae. Etiam nisl massa, mattis in volutpat sed, elementum et diam. Mauris scelerisque sem eu lorem lobortis accumsan. Sed dapibus aliquam lacus, condimentum gravida lorem ultricies ac. Quisque accumsan quam vel nulla consectetur pretium. Morbi sed luctus odio. Aenean sodales elit nulla, vitae finibus libero scelerisque nec. Phasellus consequat ex ac sem euismod interdum.</div>
      </div>
      <div class="copy">Vivamus volutpat neque vitae suscipit eleifend. Curabitur consectetur maximus odio a laoreet. Vestibulum in sem tristique purus ullamcorper pellentesque. Vivamus nec urna diam. Suspendisse non gravida dui. Quisque quis fringilla eros. Mauris rhoncus, velit vitae euismod maximus, diam leo pulvinar leo, vel imperdiet sem massa eu ex. Donec dui dui, tempus ac massa at, eleifend euismod est. Aenean dictum vitae justo non faucibus. Integer volutpat semper lacinia. Praesent ligula justo, maximus a pharetra eget, ultrices in diam. Ut ornare quis orci id scelerisque.</div>
      <div id="contact"  class="copy layout-col layout-justify-between">
        <div>Contact: Proin mollis pulvinar vulputate. Curabitur suscipit tempor tellus, vel semper arcu. Praesent vel nisi imperdiet, dictum neque nec, pellentesque massa. Phasellus eu ornare tortor, non malesuada massa. Phasellus cursus, justo et laoreet maximus, neque orci finibus tellus, ut viverra neque augue in tellus. Fusce volutpat tincidunt massa, id laoreet augue lacinia et. Donec id iaculis dolor, et blandit nulla. Nullam vitae quam sed purus tempus gravida. Proin elementum magna nisl, at vulputate tellus egestas vitae. Etiam nisl massa, mattis in volutpat sed, elementum et diam. Mauris scelerisque sem eu lorem lobortis accumsan. Sed dapibus aliquam lacus, condimentum gravida lorem ultricies ac. Quisque accumsan quam vel nulla consectetur pretium. Morbi sed luctus odio. Aenean sodales elit nulla, vitae finibus libero scelerisque nec. Phasellus consequat ex ac sem euismod interdum.</div>
        <div>picture</div>
        <div>Proin mollis pulvinar vulputate. Curabitur suscipit tempor tellus, vel semper arcu. Praesent vel nisi imperdiet, dictum neque nec, pellentesque massa. Phasellus eu ornare tortor, non malesuada massa. Phasellus cursus, justo et laoreet maximus, neque orci finibus tellus, ut viverra neque augue in tellus. Fusce volutpat tincidunt massa, id laoreet augue lacinia et. Donec id iaculis dolor, et blandit nulla. Nullam vitae quam sed purus tempus gravida. Proin elementum magna nisl, at vulputate tellus egestas vitae. Etiam nisl massa, mattis in volutpat sed, elementum et diam. Mauris scelerisque sem eu lorem lobortis accumsan. Sed dapibus aliquam lacus, condimentum gravida lorem ultricies ac. Quisque accumsan quam vel nulla consectetur pretium. Morbi sed luctus odio. Aenean sodales elit nulla, vitae finibus libero scelerisque nec. Phasellus consequat ex ac sem euismod interdum.</div>
      </div>
    </div>
    -->
    <script src="../../Laminar.js/laminar.js"></script>
    <script src="../../Laminar.js/laminar.model.js"></script>
    <script src="../laminar.scroll.js"></script>
    <script src=""></script>
    <script>
      var getOffset = function(element) {
        var top = 0, left = 0;
        do {
            top += element.offsetTop  || 0;
            left += element.offsetLeft || 0;
            element = element.offsetParent;
        } while(element);

        return {
            top: top,
            left: left
        };
      }

      // Make a Laminar model that tracks the state of the app
      var state = Laminar.createModel({
        state:'home'
      });
      var stateTriggers = state.__getHandlerObject();
      
      // Make all of the sliding layers a Laminar object
      var sliders = document.querySelectorAll(".slider");
      for(var c=0; c<sliders.length; c++) {
        var panel = new Laminar.Widget(sliders[c]);
        var checkState = (function(p) {
          return function(target,property) {
            // (Un)Set the class to 'unslid' if the right state is set
            if(property=="state" && target[property]==p.getId()) {
              p.addClass("unslid");
            } else {
              p.removeClass("unslid");
            }
          }
        })(panel);
        // Make each panel listen to the 'state' object
        stateTriggers.addHandler("change", checkState);
      }



      var links = document.querySelectorAll(".link");
      var sections = document.querySelectorAll(".copy");
      var firstArticle = document.querySelector("div.copy:first-child");
      var firstPosition = firstArticle.getBoundingClientRect().left;
      console.log("First position is:",firstPosition);

      for(var c=0;c<links.length;c++) {
        var link = new Laminar.Widget(links[c]);
        link.listenEvent("click",function(e,obj) {
          var targetArticleId = obj.getData("link");
          var hPosX = getOffset(document.getElementById(targetArticleId)).left;
          console.log(targetArticleId,":hPos:",hPosX," Window:",window.scrollX," First position:",firstPosition," Scroll to (",hPosX,"+",window.scrollX,")");
          window.scroll({
            left: hPosX,
            top: 0,
            behavior: 'smooth'
          });
        });
      }
      var getCoordinates = function() {
        for(var c=0;c<sections.length;c++) {
          console.log(c,getOffset(sections[c]).left);
        }
      }
      getCoordinates();
    </script>
  </body>
</html>